## Analytics Project <br>

## 순환 신경망 기반 전력수요량 예측 <br>

#### 1. 문제의 정의

> 시계열 데이터를 활용한 예측 모델링을 구현하는 문제이다 <br>
> 주어진 시계열 데이터를 사용할 모델의 형식에 맞추어 처리한 후 모델들중 가장 성능이 우수한 모델을 채택하였다. <br>
> 사용한 모델은 SMA,WMA,HOLT,ARIMA등 전통적 시계열 분석 기법과 RNN 기법 등 최대한 많은 모델을 직접 다루어 본다. <br>
> 어떤 Feature, 즉 전력수요량에 영향을 미치는 요소를 찾아내는것과 그 요소를 모델링에 반영하는것이 중요한 과제이다.
> 이 문제에서 특이한 점은 <b>첫째,</b> 결측값이 굉장히 많다.(본문 그래프 참조) 따라서 결측값을 어떻게 다룰것인가 또한 중요한 변수이다. <br> <b>둘째,</b> Train과 Test에서의 예측되어야하는 세대가 다르다는점이다. 즉, A세대의 수요량 예측모델을 활용하여 B세대의 수요량을 예측해야한다.

<br>

#### 2. 데이터 탐색

>  주어진 데이터는 인천시 소재 1300세대의 2016/07/20 ~ 2018/06/30까지 시간당 전력수요량 데이터(Trian)와 2017/07/01~2018/06/30까지의 인천시 소재 200세대의 시간당 전력 수요량 데이터(Test)로 구성되어있다. 앞서 말한것처럼 Train의 1300세대와 Test의 200세대는 서로 겹치지 않는 다른 세대이다.

> 첫번째 특이점으로 지적하였던, 다수의 결측값에대한 고민이 필요하다. 결측값의 경우 크게, <br>
>  <b> 1. 미터링 시스템 부재에 의한 결측치 </b> <br>
>  <b> 2. 직전 시간대 전력 사용량 값이 높아 이후 값들이 결측치가 되는 문제 (미터링 데이터 수집 시스템의 특징) 두가지로 볼 수 있다.</b> <br>

>직전 시간대 과대사용에 의한 결측값의 경우, 해당 세대의 전체 수요량 평균값에 비해 관측치가 지나치게 큰 구간을 파악하여 이후의 값이 결측값이면 두번째 요인에 의한 결측값이라 판단, 결측구간을 직전과대값/결측구간 길이의 값으로 결측값을 채워 넣었다.
<br>

> 주어진 데이터에는 각기 다른 총 1500세대의 2년간 전력수요량 데이터가 존재한다. 1500세대(아파트 or 상가)는 각 세대만의 수요패턴을 갖고있을것이라는 생각을 해보았다. 예를들어, A세대는 주말에만 수요량이 높아지는 경향, B세대는 월,금에 수요량이 높아지는 경향등 세대별로 다양한 전력수요 패턴을 가질것이다. 따라서 예측 모델링 이전에 <b> 시간단위 전력사용량에 대한 시계열 패턴의 군집 및 분류분석</b>이 선행되어야 한다고 생각하였다.


#### 3. 모델링

> 모델링의 경우 시계열 분석기법 전반에 대한 학습을 위해 가능한 모델들을 모두 사용해 본 뒤 가장 성능이 우수한 모델을 채택하였다.
> 결과적으로 가장 성능이 우수했던 RNN기반 모델의 프로세스는 아래와 같다
> 1. 세대별 수요 패턴에 따른 군집 분류 (Train 1300세대에 대한)
> 2. 군집별 모델 생성 및 학습
> 3. Test 200세대를 Train 1300세대의 군집에 맞추어 분류
> 4. Test 200세대의 군집별 예측

#### 모델링 결과 예측치와 실제 관측치 비교

* 실제값에 대한 그래프 <br>

![실제값](https://user-images.githubusercontent.com/35517797/67937631-43951c80-fc11-11e9-81b4-1cad520a1397.png> 

<br>

* 예측값에 대한 그래프 <br>

![예측](https://user-images.githubusercontent.com/35517797/67937638-47c13a00-fc11-11e9-8bc4-99982481a400.png)

<br>

#### 4. 나는 프로젝트를 통해 무엇을 배우고 느꼈는가
> 연습용 데이터셋이나 캐글의 가이드라인이 있는 데이터분석 문제가 아닌 스스로의 능력으로 진행해본 프로젝트는 처음이다. 아직 100%의 완성을 시키지 못했고 만족도 또한 높지 않지만 스스로 진행하며 느낀점과 성장도는 매우 높다고 생각한다. 느낀점을 정리해보자면, <br><br>
> <b>첫째,</b> 계획없는 분석은 산으로가는 지름길이라는 점이다. 데이터를 무작정 다루어보기 보다는, 반드시 내가 해결해야하는 과제를 정확히 파악한 후 탑다운 방식으로 최종 산출물을 그려보는 접근법이 필요하다는것을 절실히 느꼈다. 시작점과 끝점에 대한 명확한 기준이 설립되어야 중간 과정에서 온길을 되돌아가는 수고를 덜 수 있겠다른 생각이 절실히 들었다. <br><br>
> <b>둘째로,</b> 데이터를 모델링에 맞추는것이아닌 데이터에 맞는 모델링이 필요하다는것을 느꼈다. 연습용 데이터와 실제의 데이터는 당황스러울정도로 달랐다. 무자비한 결측값과 기존 상식과는 다른 상관관계는 보이는 중간 결과물들을 보며 데이터를 전처리하는 과정도 중요하지만 그것이 불가능한 경우에 유연한 모델링 능력 또한 반드시 필요한 능력일것이라는 생각이 들었다. <br><br>
> <b>마지막으로는,</b> 어려움을 겪더라도 실제로 데이터분석 프로젝트를 진행해보는 과정은 성장하는데 있어서 반드시 필요한 부분이라는점이다. 이번 프로젝트가시계열 데이터를 직접(예제 데이터가아닌) 다루어본 첫번째인데, 그 동안 책이나 예제를 통한 학습에서는 왜 저런 전처리과정과 prameter가 사용되는가에 대한 이해가 잘 되지 않았지만 실제 프로젝트를 진행하는동안 이해가 가지않던 부분이 명확히 이해되는 순간을 여럿 겪었다. 충분한 학습과 적절한 프로젝트의 병행은 성장을 위한 지름길이라는것을 다시한번 배울 수 있었다.


#### 5. 이 프로젝트를 지속한다면, 다음 단계는 무엇인가?
> 앞서 말한데로, 이 프로젝트는 100% 완성된것이 아니다. 예측 모델링 부부은 어느정도 완성되었지만 이 예측모델을 활용하는 활용사례 까지 진행할 계획이다. 이 모델링 프로젝트의 의의는 <b>"각 세대,상가,건물별로의 세분화된 예측이 가능해짐"</b>에 있다. 기존의 전체를 다루는 수요예측이 아닌 사물인터넷,센서데이터를 활용한 더 정교하고 세분화된 예측이 가능해지는 것이다. <br>
> 각 세대,상가,건물별로의 전력수요량 예측이 가능해진다면 이는 세대별 맞춤 서비스 혹은 관리자(ex한국전력)의 입장에서는 target 맞춤 관리 시스템을 구현할 수 있다는 점이다. <b>예측모델을 통한 세대별 통합 수요관리시스템이 이 프로젝트의 최종 목표이다.</b>
